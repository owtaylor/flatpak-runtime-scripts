flatpak:
    id: org.centos.stream.Platform
    build-runtime: true
    name: el10/flatpak-runtime
    component: flatpak-runtime
    branch: el10
    sdk: org.centos.stream.Sdk
    finish-args: >
        --env=GI_TYPELIB_PATH=/app/lib64/girepository-1.0 --env=GST_PLUGIN_SYSTEM_PATH=/app/lib64/gstreamer-1.0:/usr/lib64/gstreamer-1.0
        --env=LD_LIBRARY_PATH=/app/lib64 --env=PATH=/app/sbin:/app/bin:/usr/sbin:/usr/bin
        --env=PINENTRY_BINARY=/usr/bin/pinentry-gnome3 --env=XDG_DATA_DIRS=/app/share:/usr/share:/usr/share/runtime/share:/run/host/user-share:/run/host/share
        --extension=org.freedesktop.Platform.GL=version=1.4 --extension=org.freedesktop.Platform.GL=directory=lib64/GL
        --extension=org.freedesktop.Platform.GL=subdirectories=true --extension=org.freedesktop.Platform.GL=no-autodownload=true
        --extension=org.freedesktop.Platform.GL=autodelete=false --extension=org.freedesktop.Platform.GL=add-ld-path=lib
        --extension=org.freedesktop.Platform.GL=merge-dirs=vulkan/icd.d;glvnd/egl_vendor.d;OpenCL/vendors;lib/dri;lib/d3d;vulkan/explicit_layer.d;vulkan/implicit_layer.d
        --extension=org.freedesktop.Platform.GL=download-if=active-gl-driver --extension=org.freedesktop.Platform.GL=enable-if=active-gl-driver
        --extension=org.freedesktop.Platform.GL=autoprune-unless=active-gl-driver
    cleanup-commands: |
        appstream-compose --verbose   \
            --prefix=/usr             \
            --basename=org.centos.stream.Platform \
            --origin=flatpak          \
            org.centos.stream.Platform 1>&2

        mv -f /usr/bin/flatpak-xdg-email /usr/bin/xdg-email
        mv -f /usr/bin/flatpak-xdg-open /usr/bin/xdg-open

        rm -rf /etc/flatpak-builder/

        # Create a directory for mounting org.freedesktop.Platform.GL extension point
        mkdir -p /usr/lib64/GL

        rm -r /etc/glvnd
        ln -s ../lib64/GL/glvnd /etc/glvnd

        rm -r /etc/vulkan
        ln -s ../lib64/GL/vulkan /etc/vulkan

        touch -d @0 /usr/share/fonts /usr/share/fonts/*
        fc-cache -rs
    packages:
    - acl
    - adwaita-cursor-theme
    - adwaita-icon-theme
    - alsa-lib
    - alsa-plugins-arcamav
    - alsa-plugins-oss
    - alsa-plugins-pulseaudio
    - alsa-plugins-upmix
    - alsa-plugins-usbstream
    - alsa-plugins-vdownmix
    - alternatives
    - appstream
    - appstream-data
    - at-spi2-atk
    - at-spi2-core
    - atk
    - attr
    - audit-libs
    - authselect
    - authselect-libs
    - avahi-glib
    - avahi-libs
    - basesystem
    - bash
    - bluez-libs
    - bzip2
    - bzip2-libs
    - ca-certificates
    - cairo
    - cairo-gobject
    - centos-gpg-keys
    - centos-stream-release
    - centos-stream-repos
    - colord-libs
    - coreutils
    - coreutils-common
    - cracklib
    - cracklib-dicts
    - crypto-policies
    - crypto-policies-scripts
    - cups-libs
    - curl
    - cyrus-sasl-lib
    - cyrus-sasl-md5
    - cyrus-sasl-plain
    - cyrus-sasl-scram
    - dbus
    - dbus-broker
    - dbus-common
    - dbus-libs
    - dbus-tools
    - default-fonts-core-sans
    - dejavu-sans-fonts
    - dejavu-sans-mono-fonts
    - dejavu-serif-fonts
    - desktop-file-utils
    - diffutils
    - dnf-data
    - duktape
    - e2fsprogs-libs
    - elfutils-debuginfod-client
    - elfutils-default-yama-scope
    - elfutils-libelf
    - elfutils-libs
    - emacs-filesystem
    - expat
    - fdk-aac-free
    - fftw-libs-double
    - file
    - file-libs
    - filesystem
    - findutils
    - flac-libs
    - flatpak-runtime-config
    - flatpak-spawn
    - flatpak-xdg-utils
    - fontconfig
    - fonts-filesystem
    - freetype
    - fribidi
    - gawk
    - gdbm
    - gdbm-libs
    - gdk-pixbuf2
    - gdk-pixbuf2-modules
    - geoclue2-libs
    - gettext
    - gettext-envsubst
    - gettext-libs
    - gettext-runtime
    - giflib
    - glib-networking
    - glib2
    - glibc
    - glibc-all-langpacks
    - glibc-common
    - glibc-minimal-langpack
    - gmp
    - gmp-c++
    - gnu-free-fonts-common
    - gnu-free-sans-fonts
    - gnupg2
    - gnupg2-smime
    - gnutls
    - gnutls-c++
    - gnutls-dane
    - gobject-introspection
    - google-carlito-fonts
    - google-crosextra-caladea-fonts
    - google-noto-color-emoji-fonts
    - google-noto-fonts-common
    - google-noto-sans-mono-vf-fonts
    - google-noto-sans-vf-fonts
    - google-noto-serif-vf-fonts
    - gpgme
    - gpgmepp
    - graphene
    - graphite2
    - grep
    - gsettings-desktop-schemas
    - gsm
    - gstreamer1
    - gstreamer1-plugins-bad-free
    - gstreamer1-plugins-bad-free-libs
    - gstreamer1-plugins-base
    - gstreamer1-plugins-good
    - gstreamer1-plugins-good-gtk
    -   name: gstreamer1-plugins-ugly-free
        platforms:
            only:
            - aarch64
            - ppc64le
            - x86_64
    - gtk-update-icon-cache
    - gtk3
    - gtk3-immodule-xim
    - gtk4
    - gzip
    - harfbuzz
    - harfbuzz-icu
    - hicolor-icon-theme
    - hostname
    - hunspell
    - hunspell-af
    - hunspell-ar
    - hunspell-be
    - hunspell-bg
    - hunspell-bn
    - hunspell-br
    - hunspell-ca
    - hunspell-cs
    - hunspell-da
    - hunspell-de
    - hunspell-el
    - hunspell-en
    - hunspell-en-GB
    - hunspell-en-US
    - hunspell-eo
    - hunspell-es
    - hunspell-es-AR
    - hunspell-es-BO
    - hunspell-es-CL
    - hunspell-es-CO
    - hunspell-es-CR
    - hunspell-es-CU
    - hunspell-es-DO
    - hunspell-es-EC
    - hunspell-es-ES
    - hunspell-es-GQ
    - hunspell-es-GT
    - hunspell-es-HN
    - hunspell-es-MX
    - hunspell-es-NI
    - hunspell-es-PA
    - hunspell-es-PE
    - hunspell-es-PR
    - hunspell-es-PY
    - hunspell-es-SV
    - hunspell-es-US
    - hunspell-es-UY
    - hunspell-es-VE
    - hunspell-et
    - hunspell-fa
    - hunspell-filesystem
    - hunspell-fr
    - hunspell-gd
    - hunspell-gl
    - hunspell-gu
    - hunspell-he
    - hunspell-hi
    - hunspell-hr
    - hunspell-hu
    - hunspell-id
    - hunspell-is
    - hunspell-it
    - hunspell-ko
    - hunspell-lt
    - hunspell-lv
    - hunspell-ne
    - hunspell-sw
    - hunspell-te
    - hunspell-th
    - hunspell-uk
    - hunspell-vi
    - hwdata
    - hyphen
    - hyphen-af
    - hyphen-be
    - hyphen-bg
    - hyphen-ca
    - hyphen-cs
    - hyphen-da
    - hyphen-de
    - hyphen-el
    - hyphen-en
    - hyphen-eo
    - hyphen-es
    - hyphen-et
    - hyphen-fr
    - hyphen-gl
    - hyphen-hr
    - hyphen-hu
    - hyphen-id
    - hyphen-it
    - hyphen-lt
    - hyphen-lv
    - hyphen-nb
    - hyphen-nl
    - hyphen-nn
    - hyphen-pl
    - hyphen-pt
    - hyphen-ro
    - hyphen-ru
    - hyphen-sk
    - hyphen-sl
    - hyphen-sr
    - hyphen-sv
    - hyphen-te
    - hyphen-uk
    - hyphen-zu
    - ibus-gtk3
    - ibus-libs
    - iso-codes
    - jbigkit-libs
    - json-c
    - json-glib
    - keyutils-libs
    - kmod-libs
    - krb5-libs
    - lame
    - lame-libs
    - lcms2
    - less
    -   name: liba52
        platforms:
            only:
            - aarch64
            - ppc64le
            - x86_64
    - libacl
    - libadwaita
    - libappstream-glib
    - libarchive
    - libasan
    - libassuan
    - libasyncns
    - libatomic
    - libattr
    - libblkid
    - libbrotli
    - libcanberra
    - libcanberra-gtk3
    - libcap
    - libcap-ng
    -   name: libcdio
        platforms:
            only:
            - aarch64
            - ppc64le
            - x86_64
    - libcom_err
    - libcurl
    - libdatrie
    - libdecor
    - libdnf
    - libdrm
    - libdvdnav
    - libdvdread
    - libeconf
    - libedit
    - libepoxy
    - liberation-fonts-common
    - liberation-mono-fonts
    - liberation-sans-fonts
    - liberation-serif-fonts
    - libevent
    - libexif
    - libfdisk
    - libffi
    - libgcab1
    - libgcc
    - libgcrypt
    - libgfortran
    - libglvnd
    - libglvnd-egl
    - libglvnd-gles
    - libglvnd-glx
    - libglvnd-opengl
    - libgomp
    - libgpg-error
    - libgudev
    - libgusb
    -   name: libhwasan
        platforms:
            only:
            - aarch64
            - x86_64
    - libICE
    - libicu
    - libidn2
    - libitm
    - libjpeg-turbo
    - libjpeg-turbo-utils
    - libksba
    - liblc3
    -   name: libldac
        platforms:
            only:
            - aarch64
            - ppc64le
            - x86_64
    - liblerc
    - liblsan
    - libmodulemd
    - libmount
    -   name: libmpeg2
        platforms:
            only:
            - aarch64
            - ppc64le
            - x86_64
    - libnghttp2
    - libnsl
    - libogg
    - libpciaccess
    - libpeas1
    - libpkgconf
    - libpng
    - libproxy
    - libpsl
    - libpwquality
    -   name: libquadmath
        platforms:
            only:
            - ppc64le
            - x86_64
    - librepo
    - libreport-filesystem
    - librsvg2
    - librsvg2-tools
    -   name: librtas
        platforms:
            only:
            - ppc64le
    - libsamplerate
    - libsbc
    - libseccomp
    - libselinux
    - libselinux-utils
    - libsemanage
    - libsepol
    - libsepol-utils
    - libshout
    - libSM
    - libsmartcols
    - libsndfile
    - libsolv
    - libsoup3
    - libsrtp
    - libss
    - libssh
    - libssh-config
    - libstdc++
    - libstemmer
    - libtasn1
    - libtdb
    - libthai
    - libtheora
    - libtiff
    - libtool-ltdl
    - libtracker-sparql
    - libtsan
    - libubsan
    - libunistring
    - libusb1
    - libutempter
    - libuuid
    - libv4l
    - libva
    - libvdpau
    - libverto
    - libvorbis
    - libvpx
    - libwayland-client
    - libwayland-cursor
    - libwayland-egl
    - libwayland-server
    - libwebp
    - libX11
    - libX11-common
    - libX11-xcb
    - libXau
    - libxcb
    - libXcomposite
    - libxcrypt
    - libXcursor
    - libXdamage
    - libXdmcp
    - libXext
    - libXfixes
    - libXft
    - libXi
    - libXinerama
    - libxkbcommon
    - libxkbcommon-x11
    - libxkbfile
    - libxml2
    - libxmlb
    - libXpm
    - libXrandr
    - libXrender
    - libXScrnSaver
    - libxshmfence
    - libxslt
    - libXt
    - libXtst
    - libXv
    - libXxf86vm
    - libyaml
    - libzstd
    - llvm-libs
    - lua-libs
    - lz4
    - lz4-libs
    - mailcap
    - mesa-dri-drivers
    - mesa-filesystem
    - mesa-libEGL
    - mesa-libgbm
    - mesa-libGL
    - mesa-libglapi
    -   name: mesa-vulkan-drivers
        platforms:
            only:
            - x86_64
    - microdnf
    - mlocate
    - mpdecimal
    - mpfr
    - mpg123-libs
    - nano
    - ncurses
    - ncurses-base
    - ncurses-libs
    - nettle
    - npth
    - nspr
    - nss
    - nss-softokn
    - nss-softokn-freebl
    - nss-sysinit
    - nss-util
    - ocl-icd
    - openjpeg2
    - openldap
    - openssl-libs
    - openssl-pkcs11
    - opus
    - orc
    - p11-kit
    - p11-kit-server
    - p11-kit-trust
    - pam
    - pam-libs
    - pango
    - pciutils
    - pciutils-libs
    - pcre2
    - pcre2-syntax
    - pcre2-utf16
    - pcre2-utf32
    - pipewire-alsa
    - pipewire-gstreamer
    - pipewire-jack-audio-connection-kit
    - pipewire-jack-audio-connection-kit-libs
    - pipewire-libs
    - pixman
    - pkgconf
    - pkgconf-m4
    - pkgconf-pkg-config
    - popt
    - procps-ng
    - protobuf-c
    - publicsuffix-list-dafsa
    - pulseaudio-libs
    - pulseaudio-libs-glib2
    - python-unversioned-command
    - python3
    - python3-brotli
    - python3-libs
    - python3-libxml2
    - python3-mako
    - python3-markdown
    - python3-markupsafe
    - python3-packaging
    - python3-pip-wheel
    - python3-setuptools
    - python3-six
    - readline
    - redhat-text-vf-fonts
    - rpm
    - rpm-libs
    - rpm-sequoia
    - rsvg-pixbuf-loader
    - SDL2
    - sed
    - setup
    - shadow-utils
    - shared-mime-info
    - sound-theme-freedesktop
    - soundtouch
    - speech-dispatcher-libs
    - speex
    - speexdsp
    - sqlite-libs
    - systemd-libs
    - taglib
    - tar
    - tpm2-tss
    - twolame-libs
    - tzdata
    - unbound-libs
    - unzip
    - util-linux
    - util-linux-core
    - vulkan-loader
    - wavpack
    - webrtc-audio-processing
    - wget2
    - wget2-libs
    - wget2-wget
    - which
    - xcb-util
    - xcb-util-cursor
    - xcb-util-image
    - xcb-util-keysyms
    - xcb-util-renderutil
    - xcb-util-wm
    - xdg-user-dirs
    - xdg-utils
    - xkbcomp
    - xkeyboard-config
    - xml-common
    - xprop
    - xxhash-libs
    - xz
    - xz-libs
    - xz-lzma-compat
    - zenity
    - zip
    - zlib-ng-compat
    - zstd
