flatpak:
    id: org.fedoraproject.Platform
    build-runtime: true
    name: f39/flatpak-runtime
    component: flatpak-runtime
    branch: f39
    sdk: org.fedoraproject.Sdk
    finish-args: >
        --env=GI_TYPELIB_PATH=/app/lib64/girepository-1.0 --env=GST_PLUGIN_SYSTEM_PATH=/app/lib64/gstreamer-1.0:/usr/lib64/gstreamer-1.0
        --env=LD_LIBRARY_PATH=/app/lib64 --env=PATH=/app/sbin:/app/bin:/usr/sbin:/usr/bin
        --env=PINENTRY_BINARY=/usr/bin/pinentry-gnome3 --env=XDG_DATA_DIRS=/app/share:/usr/share:/usr/share/runtime/share:/run/host/user-share:/run/host/share
        --extension=org.freedesktop.Platform.GL=version=1.4 --extension=org.freedesktop.Platform.GL=directory=lib64/GL
        --extension=org.freedesktop.Platform.GL=subdirectories=true --extension=org.freedesktop.Platform.GL=no-autodownload=true
        --extension=org.freedesktop.Platform.GL=autodelete=false --extension=org.freedesktop.Platform.GL=add-ld-path=lib
        --extension=org.freedesktop.Platform.GL=merge-dirs=vulkan/icd.d;glvnd/egl_vendor.d;OpenCL/vendors;lib/dri;lib/d3d;vulkan/explicit_layer.d;vulkan/implicit_layer.d
        --extension=org.freedesktop.Platform.GL=download-if=active-gl-driver --extension=org.freedesktop.Platform.GL=enable-if=active-gl-driver
        --extension=org.freedesktop.Platform.GL=autoprune-unless=active-gl-driver
    cleanup-commands: |
        appstream-compose --verbose   \
            --prefix=/usr             \
            --basename=org.fedoraproject.Platform \
            --origin=flatpak          \
            org.fedoraproject.Platform 1>&2

        mv -f /usr/bin/flatpak-xdg-email /usr/bin/xdg-email
        mv -f /usr/bin/flatpak-xdg-open /usr/bin/xdg-open

        rm -rf /etc/flatpak-builder/

        # Create a directory for mounting org.freedesktop.Platform.GL extension point
        mkdir -p /usr/lib64/GL

        rm -r /etc/glvnd
        ln -s ../lib64/GL/glvnd /etc/glvnd

        rm -r /etc/vulkan
        ln -s ../lib64/GL/vulkan /etc/vulkan

        touch -d @0 /usr/share/fonts /usr/share/fonts/*
        fc-cache -rs
    packages:
    - abattis-cantarell-vf-fonts
    - acl
    - adobe-source-code-pro-fonts
    - adwaita-cursor-theme
    - adwaita-gtk2-theme
    - adwaita-icon-theme
    - alsa-lib
    - alsa-plugins-arcamav
    - alsa-plugins-oss
    - alsa-plugins-pulseaudio
    - alsa-plugins-upmix
    - alsa-plugins-usbstream
    - alsa-plugins-vdownmix
    - alternatives
    - appstream
    - appstream-data
    - aspell
    - at-spi2-atk
    - at-spi2-core
    - atk
    - attr
    - audit-libs
    - authselect
    - authselect-libs
    - avahi-glib
    - avahi-libs
    - avif-pixbuf-loader
    - basesystem
    - bash
    - bluez-libs
    - bubblewrap
    - bzip2
    - bzip2-libs
    - ca-certificates
    - cairo
    - cairo-gobject
    - cdparanoia-libs
    - cjson
    - cmake-filesystem
    - codec2
    - colord-libs
    - coreutils
    - coreutils-common
    - cracklib
    - cracklib-dicts
    - crypto-policies
    - crypto-policies-scripts
    - cups-client
    - cups-libs
    - curl
    - cyrus-sasl-lib
    - cyrus-sasl-md5
    - cyrus-sasl-plain
    - cyrus-sasl-scram
    - dbus
    - dbus-broker
    - dbus-common
    - dbus-libs
    - dbus-tools
    - default-fonts-core-sans
    - dejavu-sans-fonts
    - dejavu-sans-mono-fonts
    - dejavu-serif-fonts
    - desktop-file-utils
    - diffutils
    - double-conversion
    - duktape
    - e2fsprogs-libs
    - elfutils-debuginfod-client
    - elfutils-default-yama-scope
    - elfutils-libelf
    - elfutils-libs
    - emacs-filesystem
    - enchant2
    - expat
    - fcitx5-gtk
    - fcitx5-gtk2
    - fcitx5-gtk3
    - fcitx5-gtk4
    - fcitx5-libs
    - fcitx5-qt
    - fcitx5-qt-libfcitx5qt5widgets
    - fcitx5-qt-libfcitx5qtdbus
    - fcitx5-qt-module
    - fcitx5-qt6
    - fdk-aac-free
    - fedora-gpg-keys
    - fedora-release
    - fedora-release-common
    - fedora-release-identity-basic
    - fedora-repos
    - ffmpeg-free
    - fftw-libs-double
    - file
    - file-libs
    - filesystem
    - findutils
    - flac
    - flac-libs
    - flatpak-runtime-config
    - flatpak-spawn
    - flatpak-xdg-utils
    - flite
    - fontconfig
    - fonts-filesystem
    - freeglut
    - freetype
    - frei0r-plugins
    - fribidi
    - fuse-libs
    - game-music-emu
    - gavl
    - gawk
    - gcr
    - gcr-libs
    - gcr3
    - gcr3-base
    - gdbm
    - gdbm-libs
    - gdk-pixbuf2
    - gdk-pixbuf2-modules
    - geoclue2-libs
    - gettext
    - gettext-envsubst
    - gettext-libs
    - gettext-runtime
    - giflib
    - gjs
    - glib-networking
    - glib2
    - glibc
    - glibc-all-langpacks
    - glibc-common
    - glibc-gconv-extra
    - glibc-minimal-langpack
    - glx-utils
    - gmp
    - gmp-c++
    - gnome-themes-extra
    - gnome-user-docs
    - gnu-free-fonts-common
    - gnu-free-mono-fonts
    - gnu-free-sans-fonts
    - gnu-free-serif-fonts
    - gnupg2
    - gnupg2-smime
    - gnutls
    - gnutls-c++
    - gnutls-dane
    - gobject-introspection
    - google-carlito-fonts
    - google-crosextra-caladea-fonts
    - google-noto-color-emoji-fonts
    - google-noto-fonts-common
    - google-noto-sans-mono-vf-fonts
    - google-noto-sans-vf-fonts
    - google-noto-serif-vf-fonts
    - gpgme
    - gpgmepp
    - graphene
    - graphite2
    - grep
    - gsettings-desktop-schemas
    - gsm
    - gssdp
    - gstreamer1
    - gstreamer1-plugin-libav
    - gstreamer1-plugins-bad-free
    - gstreamer1-plugins-bad-free-libs
    - gstreamer1-plugins-base
    - gstreamer1-plugins-good
    - gstreamer1-plugins-good-gtk
    - gstreamer1-plugins-good-qt
    - gstreamer1-plugins-good-qt6
    - gstreamer1-plugins-ugly-free
    - gtk-immodules-imsettings
    - gtk-update-icon-cache
    - gtk2
    - gtk2-immodules
    - gtk3
    - gtk3-immodule-xim
    - gtk3-immodules
    - gtk4
    - gtksourceview4
    - gtksourceview5
    - gupnp
    - gupnp-igd
    - gvfs-client
    - gzip
    - harfbuzz
    - harfbuzz-icu
    - hicolor-icon-theme
    - highcontrast-icon-theme
    - highway
    - hostname
    - hunspell
    - hunspell-af
    - hunspell-ar
    - hunspell-be
    - hunspell-bg
    - hunspell-bn
    - hunspell-br
    - hunspell-ca
    - hunspell-cs
    - hunspell-da
    - hunspell-de
    - hunspell-el
    - hunspell-en
    - hunspell-en-GB
    - hunspell-en-US
    - hunspell-es
    - hunspell-es-AR
    - hunspell-es-BO
    - hunspell-es-CL
    - hunspell-es-CO
    - hunspell-es-CR
    - hunspell-es-CU
    - hunspell-es-DO
    - hunspell-es-EC
    - hunspell-es-ES
    - hunspell-es-GQ
    - hunspell-es-GT
    - hunspell-es-HN
    - hunspell-es-MX
    - hunspell-es-NI
    - hunspell-es-PA
    - hunspell-es-PE
    - hunspell-es-PR
    - hunspell-es-PY
    - hunspell-es-SV
    - hunspell-es-US
    - hunspell-es-UY
    - hunspell-es-VE
    - hunspell-et
    - hunspell-filesystem
    - hunspell-fr
    - hunspell-gd
    - hunspell-gl
    - hunspell-gu
    - hunspell-he
    - hunspell-hi
    - hunspell-hr
    - hunspell-hu
    - hunspell-id
    - hunspell-is
    - hunspell-it
    - hunspell-lt
    - hunspell-lv
    - hunspell-nb
    - hunspell-ne
    - hunspell-nl
    - hunspell-nn
    - hunspell-oc
    - hunspell-pl
    - hunspell-pt
    - hunspell-pt-BR
    - hunspell-ro
    - hunspell-ru
    - hunspell-si
    - hunspell-sk
    - hunspell-sl
    - hunspell-sq
    - hunspell-sr
    - hunspell-sv
    - hunspell-sw
    - hunspell-te
    - hunspell-th
    - hunspell-tr
    - hunspell-uk
    - hunspell-vi
    - hwdata
    - hyphen
    - hyphen-af
    - hyphen-bg
    - hyphen-ca
    - hyphen-cs
    - hyphen-da
    - hyphen-de
    - hyphen-el
    - hyphen-en
    - hyphen-es
    - hyphen-et
    - hyphen-fr
    - hyphen-gl
    - hyphen-hr
    - hyphen-hu
    - hyphen-id
    - hyphen-is
    - hyphen-it
    - hyphen-lt
    - hyphen-lv
    - hyphen-nb
    - hyphen-nl
    - hyphen-nn
    - hyphen-pl
    - hyphen-pt
    - hyphen-pt-BR
    - hyphen-ro
    - hyphen-ru
    - hyphen-sk
    - hyphen-sl
    - hyphen-sr
    - hyphen-sv
    - hyphen-te
    - hyphen-uk
    - hyphen-zu
    - ibus-gtk2
    - ibus-gtk3
    - ibus-gtk4
    - ibus-libs
    - ilbc
    - iso-codes
    - itstool
    - jansson
    - jasper-libs
    - javascriptcoregtk4.0
    - javascriptcoregtk4.1
    - javascriptcoregtk6.0
    - jbigkit-libs
    - json-c
    - json-glib
    - jxl-pixbuf-loader
    - keyutils-libs
    - kmod-libs
    - krb5-libs
    - krb5-pkinit
    - krb5-workstation
    - ladspa
    - lame
    - lame-libs
    - lcms2
    - lcms2-utils
    - leptonica
    - less
    - liba52
    - libacl
    - libadwaita
    - libaom
    - libappstream-glib
    - libarchive
    - libasan
    - libass
    - libassuan
    - libasyncns
    - libatomic
    - libattr
    - libavc1394
    - libavcodec-free
    - libavdevice-free
    - libavfilter-free
    - libavformat-free
    - libavif
    - libavutil-free
    - libb2
    - libblkid
    - libbluray
    - libbrotli
    - libbs2b
    - libcaca
    - libcanberra
    - libcanberra-gtk3
    - libcap
    - libcap-ng
    - libcbor
    - libcdio
    - libcdio-paranoia
    - libchromaprint
    - libcloudproviders
    - libcom_err
    - libcurl
    - libdatrie
    - libdav1d
    - libdb
    - libdc1394
    - libdecor
    - libdrm
    - libdvbv5
    - libdvdnav
    - libdvdread
    - libeconf
    - libedit
    - libepoxy
    - liberation-fonts-common
    - liberation-mono-fonts
    - liberation-sans-fonts
    - liberation-serif-fonts
    - libevdev
    - libevdev-utils
    - libevent
    - libexif
    - libfdisk
    - libffi
    - libfido2
    - libfl2
    - libgcab1
    - libgcc
    - libgcrypt
    - libgdither
    - libgee
    - libgfortran
    - libglvnd
    - libglvnd-egl
    - libglvnd-gles
    - libglvnd-glx
    - libglvnd-opengl
    - libgomp
    - libgpg-error
    - libgudev
    - libgusb
    - libhandy
    - libICE
    - libicu
    - libidn2
    - libiec61883
    - libinput
    - libitm
    - libjpeg-turbo
    - libjpeg-turbo-utils
    - libjxl
    - libkadm5
    - libksba
    - liblc3
    - libldac
    - libldb
    - liblerc
    - liblsan
    - libmanette
    - libmetalink
    - libmng
    - libmodplug
    - libmount
    - libmpeg2
    - libmysofa
    - libnghttp2
    - libnice
    - libnice-gstreamer1
    - libnotify
    - libnsl
    - libnsl2
    - libobjc
    - libogg
    - libopenmpt
    - libpciaccess
    - libpkgconf
    - libplacebo
    - libpng
    - libpostproc-free
    - libproxy
    - libpsl
    - libpwquality
    -   name: libquadmath
        platforms:
            only:
            - ppc64le
            - x86_64
    - librabbitmq
    - libraw1394
    - librist
    - librsvg2
    - librsvg2-tools
    - libsamplerate
    - libsbc
    - libseccomp
    - libsecret
    - libselinux
    - libselinux-utils
    - libsemanage
    - libsepol
    - libsepol-utils
    - libshaderc
    - libshout
    - libsigsegv
    - libSM
    - libsmartcols
    - libsmbclient
    - libsndfile
    - libsodium
    - libsoup
    - libsoup3
    - libsrtp
    - libss
    - libssh
    - libssh-config
    - libstdc++
    - libstemmer
    - libswresample-free
    - libswscale-free
    - libtalloc
    - libtasn1
    - libtdb
    - libtevent
    - libthai
    - libtheora
    - libtiff
    - libtirpc
    - libtool-ltdl
    - libtracker-sparql
    - libtsan
    - libubsan
    - libudfread
    - libunistring
    - libunwind
    - libusb1
    - libutempter
    - libuuid
    - libv4l
    - libva
    - libvdpau
    - libverto
    - libvisual
    -   name: libvmaf
        platforms:
            only:
            - x86_64
    - libvorbis
    - libvpx
    - libwacom
    - libwacom-data
    - libwayland-client
    - libwayland-cursor
    - libwayland-egl
    - libwayland-server
    - libwbclient
    - libwebp
    - libwebp-tools
    - libwpe
    - libX11
    - libX11-common
    - libX11-xcb
    - libXau
    - libxcb
    - libXcomposite
    - libxcrypt
    - libXcursor
    - libXdamage
    - libXdmcp
    - libXext
    - libXfixes
    - libXft
    - libXi
    - libXinerama
    - libxkbcommon
    - libxkbcommon-utils
    - libxkbcommon-x11
    - libxkbfile
    - libxml2
    - libxmlb
    - libXpm
    - libXrandr
    - libXrender
    - libXScrnSaver
    - libxshmfence
    - libxslt
    - libXt
    - libXtst
    - libXv
    - libXxf86vm
    - libyaml
    - libzstd
    - lilv-libs
    - llvm16-libs
    - lm_sensors-libs
    - lmdb-libs
    - lpcnetfreedv
    - lua-libs
    - lv2
    - lz4
    - lz4-libs
    - lzip
    - mbedtls
    - mesa-dri-drivers
    - mesa-filesystem
    - mesa-libEGL
    - mesa-libgbm
    - mesa-libGL
    - mesa-libglapi
    - mesa-libGLU
    - mesa-va-drivers
    - mlocate
    - mozjs115
    - mpdecimal
    - mpfr
    - mpg123-libs
    - mtdev
    - mythes
    - mythes-bg
    - mythes-ca
    - mythes-cs
    - mythes-da
    - mythes-de
    - mythes-en
    - mythes-es
    - mythes-fr
    - mythes-hu
    - mythes-it
    - mythes-lv
    - mythes-nb
    - mythes-ne
    - mythes-nn
    - mythes-pl
    - mythes-pt
    - mythes-ro
    - mythes-ru
    - mythes-sk
    - mythes-sl
    - mythes-sv
    - mythes-uk
    - nano
    - ncompress
    - ncurses
    - ncurses-base
    - ncurses-libs
    - nettle
    - npth
    - nspr
    - nss
    - nss-softokn
    - nss-softokn-freebl
    - nss-sysinit
    - nss-util
    - nss_db
    - nss_hesiod
    - nuspell
    - ocl-icd
    -   name: oneVPL
        platforms:
            only:
            - x86_64
    - openal-soft
    - opencore-amr
    - openjpeg2
    - openldap
    - openpgm
    - openssh
    - openssh-clients
    - openssl-libs
    - openssl-pkcs11
    - opus
    - opusfile
    - orc
    - p11-kit
    - p11-kit-server
    - p11-kit-trust
    - pam
    - pam-libs
    - pango
    - pciutils
    - pciutils-libs
    - pcre
    - pcre-cpp
    - pcre2
    - pcre2-syntax
    - pcre2-utf16
    - pcre2-utf32
    - pinentry
    - pinentry-gnome3
    - pipewire-alsa
    - pipewire-gstreamer
    - pipewire-jack-audio-connection-kit
    - pipewire-jack-audio-connection-kit-libs
    - pipewire-libs
    - pipewire-v4l2
    - pixman
    - pkgconf
    - pkgconf-m4
    - pkgconf-pkg-config
    - popt
    - procps-ng
    - protobuf-c
    - psl
    - publicsuffix-list-dafsa
    - pulseaudio-libs
    - pulseaudio-libs-glib2
    - python-pip-wheel
    - python-unversioned-command
    - python3
    - python3-brotli
    - python3-cairo
    - python3-dbus
    - python3-gobject
    - python3-gobject-base
    - python3-gobject-base-noarch
    - python3-libs
    - python3-libxml2
    - python3-libxslt
    - python3-mako
    - python3-markdown
    - python3-markupsafe
    - python3-packaging
    - python3-setuptools
    - python3-six
    - qadwaitadecorations-qt5
    - qadwaitadecorations-qt6
    - qt-settings
    - qt5-qtbase
    - qt5-qtbase-common
    - qt5-qtbase-gui
    - qt5-qtcharts
    - qt5-qtdeclarative
    - qt5-qtgraphicaleffects
    - qt5-qtimageformats
    - qt5-qtmultimedia
    - qt5-qtquickcontrols
    - qt5-qtquickcontrols2
    - qt5-qtsensors
    - qt5-qtsvg
    - qt5-qtwayland
    - qt5-qtx11extras
    - qt5-qtxmlpatterns
    - qt6-qt5compat
    - qt6-qtbase
    - qt6-qtbase-common
    - qt6-qtbase-gui
    - qt6-qtcharts
    - qt6-qtdeclarative
    - qt6-qtimageformats
    - qt6-qtmultimedia
    - qt6-qtpositioning
    - qt6-qtserialport
    - qt6-qtshadertools
    - qt6-qtsvg
    - qt6-qtwayland
    - rav1e-libs
    - readline
    - rpm
    - rpm-libs
    - rpm-sequoia
    - rsvg-pixbuf-loader
    - rubberband
    - samba-client-libs
    - samba-common
    - samba-common-libs
    - SDL2
    - SDL2_image
    - SDL2_mixer
    - SDL2_net
    - SDL2_ttf
    - sed
    - serd
    - setup
    - sgml-common
    - shadow-utils
    - shared-mime-info
    - slang
    - snappy
    - sord
    - sound-theme-freedesktop
    - soundtouch
    - soxr
    - speex
    - speexdsp
    - spirv-tools-libs
    - sqlite-libs
    - sratom
    - srt-libs
    - svt-av1-libs
    - systemd-libs
    - systemd-standalone-tmpfiles
    - taglib
    - tar
    - tesseract
    - tesseract-langpack-eng
    - tesseract-tessdata-doc
    - tpm2-tss
    - tslib
    - turbojpeg
    - twolame-libs
    - tzdata
    - tzdata-java
    - unbound-libs
    - unzip
    - util-linux
    - util-linux-core
    - vamp-plugin-sdk
    - vapoursynth-libs
    - vid.stab
    - vo-amrwbenc
    - vulkan-loader
    - vulkan-validation-layers
    - wavpack
    - webkit2gtk4.0
    - webkit2gtk4.1
    - webkitgtk6.0
    - webp-pixbuf-loader
    - webrtc-audio-processing
    - wget
    - wget2
    - wget2-libs
    - which
    - woff2
    - wpebackend-fdo
    - xcb-proto
    - xcb-util
    - xcb-util-cursor
    - xcb-util-image
    - xcb-util-keysyms
    - xcb-util-renderutil
    - xcb-util-wm
    - xdg-dbus-proxy
    - xdg-user-dirs
    - xdg-utils
    - xkbcomp
    - xkeyboard-config
    - xml-common
    - xprop
    - xvidcore
    - xz
    - xz-libs
    - xz-lzma-compat
    - yelp
    - yelp-libs
    - yelp-xsl
    - zeromq
    - zimg
    - zip
    - zlib
    - zstd
    - zvbi
